<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>GeoTIFF im Browser</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    #map { height: 100vh; }
  </style>
</head>

<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script src="https://cdn.jsdelivr.net/npm/georaster@1.5.6/dist/georaster.browser.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/georaster-layer-for-leaflet@3.0.0/dist/georaster-layer-for-leaflet.browser.min.js"></script>


<script>
/* ðŸ” DEBUG: prÃ¼fen, ob parseGeoraster existiert */
console.log("parseGeoraster:", window.parseGeoraster);

const map = L.map('map').setView([54.5, 9.5], 8);

L.tileLayer(
  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
  { attribution: 'Â© OpenStreetMap' }
).addTo(map);

fetch("https://geoserver617.blob.core.windows.net/raster/index2018cog.tif")
  .then(r => r.arrayBuffer())
  .then(buffer => window.parseGeoraster(buffer))  // ðŸ‘ˆ EXPLIZIT
  .then(georaster => {
    const layer = new GeoRasterLayer({
      georaster,
      opacity: 0.7,
      resolution: 256
    });
    layer.addTo(map);
    map.fitBounds(layer.getBounds());
  })
  .catch(err => console.error("Raster-Fehler:", err));
</script>

</body>
</html>
